## -*- Mode: python; py-indent-offset: 4; indent-tabs-mode: nil; coding: utf-8; -*-
import sys


def configure(conf):
    e = conf.create_header_configurator()
    e.mandatory = False
    e.name = 'stdlib.h'
    e.define = 'HAVE_STDLIB_H'
    e.run()

    e = conf.create_header_configurator()
    e.mandatory = False
    e.name = 'stdlib.h'
    e.define = 'HAVE_GETENV'
    e.run()

    e = conf.create_header_configurator()
    e.mandatory = False
    e.name = 'signal.h'
    e.define = 'HAVE_SIGNAL_H'
    e.run()

    conf.write_config_header('ns3/core-config.h')



def build(bld):
    core = bld.create_ns3_module('core')
    core.source = [
        'callback-test.cc',
        'log.cc',
        'breakpoint.cc',
        'object-base.cc',
        'ptr.cc',
        'object.cc',
        'test.cc',
        'random-variable.cc',
        'rng-stream.cc',
        'uid-manager.cc',
        'default-value.cc',
        'command-line.cc',
        'type-name.cc',
        'random-variable-default-value.cc',
        'variable-tracer-test.cc',
        'trace-context.cc',
        'trace-context-element.cc',
        'trace-resolver.cc',
        'callback-trace-source.cc',
        'composite-trace-resolver.cc',
        'trace-doc.cc',
        'trace-source.cc',
        'type-traits-test.cc',
        'array-trace-resolver.cc',
        'type-id-default-value.cc',
        'value.cc',
        'boolean-value.cc',
        'value-test.cc',
        'int-value.cc',
        'uint-value.cc',
        'enum-value.cc',
        'fp-value.cc',
        'object-factory.cc',
        'object-vector.cc',
        ]

    if sys.platform == 'win32':
        core.source.extend([
            'win32-system-wall-clock-ms.cc',
            ])
    else:
        core.source.extend([
            'unix-system-wall-clock-ms.cc',
            ])
    
    headers = bld.create_obj('ns3header')
    headers.source = [
        'system-wall-clock-ms.h',
        'empty.h',
        'callback.h',
        'object-base.h',
        'ptr.h',
        'object.h',
        'log.h',
        'assert.h',
        'breakpoint.h',
        'fatal-error.h',
        'test.h',
        'random-variable.h',
        'rng-stream.h',
        'default-value.h',
        'command-line.h',
        'type-name.h',
        'type-traits.h',
        'random-variable-default-value.h',
        'trace-source.h',
        'uv-trace-source.h',
        'sv-trace-source.h',
        'fv-trace-source.h',
        'callback-trace-source.h',
        'trace-context.h',
        'trace-context-element.h',
        'trace-resolver.h',
        'composite-trace-resolver.h',
        'array-trace-resolver.h',
        'trace-doc.h',
        'int-to-type.h',
        'type-id-default-value.h',
        'value.h',
        'param-spec-helper.h',
        'int-value.h',
        'uint-value.h',
        'fp-value.h',
        'enum-value.h',
        'object-factory.h',
        ]

